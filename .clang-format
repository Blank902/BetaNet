# .clang-format configuration for BetaNet C Library
BasedOnStyle: LLVM

# Basic settings
Language: Cpp
Standard: c++11
TabWidth: 4
IndentWidth: 4
UseTab: Never
ColumnLimit: 80

# Indentation
IndentCaseLabels: true
IndentPPDirectives: BeforeHash
IndentWrappedFunctionNames: false
ContinuationIndentWidth: 4

# Alignment
AlignAfterOpenBracket: Align
AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignEscapedNewlines: Right
AlignOperands: true
AlignTrailingComments: true

# Breaking
AllowAllParametersOfDeclarationOnNextLine: true
AllowShortBlocksOnASingleLine: false
AllowShortCaseLabelsOnASingleLine: false
AllowShortFunctionsOnASingleLine: None
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false
AlwaysBreakAfterReturnType: None
AlwaysBreakBeforeMultilineStrings: false
AlwaysBreakTemplateDeclarations: false
BinPackArguments: true
BinPackParameters: true
BreakBeforeBinaryOperators: None
BreakBeforeBraces: Attach
BreakBeforeTernaryOperators: true
BreakConstructorInitializersBeforeComma: false
BreakStringLiterals: true

# Spacing
SpaceAfterCStyleCast: false
SpaceAfterTemplateKeyword: true
SpaceBeforeAssignmentOperators: true
SpaceBeforeParens: ControlStatements
SpaceInEmptyParentheses: false
SpacesBeforeTrailingComments: 1
SpacesInAngles: false
SpacesInContainerLiterals: true
SpacesInCStyleCastParentheses: false
SpacesInParentheses: false
SpacesInSquareBrackets: false

# Sorting
SortIncludes: true
IncludeBlocks: Preserve
IncludeCategories:
  - Regex:           '^<betanet/'
    Priority:        1
  - Regex:           '^<[[:alnum:].]+>'
    Priority:        2
  - Regex:           '.*'
    Priority:        3

# Function formatting
AlwaysBreakAfterDefinitionReturnType: None
AllowAllParametersOfDeclarationOnNextLine: false
BinPackParameters: false

# Pointer alignment
PointerAlignment: Right
DerivePointerAlignment: false

# Macros
MacroBlockBegin: ''
MacroBlockEnd: ''

# Keep empty lines
KeepEmptyLinesAtTheStartOfBlocks: false
MaxEmptyLinesToKeep: 1

# Comments
ReflowComments: true

# Penalties (for line breaking decisions)
PenaltyBreakAssignment: 2
PenaltyBreakBeforeFirstCallParameter: 19
PenaltyBreakComment: 300
PenaltyBreakFirstLessLess: 120
PenaltyBreakString: 1000
PenaltyExcessCharacter: 1000000
PenaltyReturnTypeOnItsOwnLine: 60

# Experimental features
ExperimentalAutoDetectBinPacking: false
